<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />

<EditForm EditContext="editContext" OnValidSubmit="SaveProductAsync">
    <DataAnnotationsValidator />
    <MudTextField Label="@Localizer["Name"]"
                  @bind-Value="@Product.Name"
                  For="@(() => Product.Name)"
                  Class="mb-4" />     
   
    <MudCardContent>
        <MudAutocomplete T="Status"
            Label=@Localizer["Status"]
            Placeholder=@Localizer["SelectAStatus"]
            SearchFunc="SearchStatuses"
            Value="selectedStatus"
            ValueChanged="StatusChanged"
            ToStringFunc="@(e=> e==null?null : $"{e.Name}")">
            <ItemTemplate Context="itemContext">
                @itemContext.Name
            </ItemTemplate>
        </MudAutocomplete>
    </MudCardContent>

    <MudCardContent>
        <MudAutocomplete T="Category"
            Label=@Localizer["Category"]
            Placeholder=@Localizer["SelectACategory"]
            SearchFunc="SearchCategories"
            Value="selectedCategory"
            ValueChanged="CategoryChanged"
            ToStringFunc="@(e=> e==null?null : $"{e.Name}")">
            <ItemTemplate Context="itemContext">
                @itemContext.Name
            </ItemTemplate>
        </MudAutocomplete>
    </MudCardContent>    

    <MudCardContent>
        <MudAutocomplete T="Marketplace"
            Label=@Localizer["Marketplace"]
            Placeholder=@Localizer["SelectMarketplace"]
            SearchFunc="SearchMarketplaces"
            Value="selectedMarketplace"
            ValueChanged="MarketplaceChanged"
            ToStringFunc="@(e=> e==null?null : $"{e.Name}")">
            <ItemTemplate Context="itemContext">
                @itemContext.Name
            </ItemTemplate>
        </MudAutocomplete>
    </MudCardContent> 

    <MudCardContent>
        <MudAutocomplete T="Store"
            Label=@Localizer["Store"]
            Placeholder=@Localizer["SelectAStore"]
            SearchFunc="SearchStores"
            Value="selectedStore"
            ValueChanged="StoreChanged"
            ToStringFunc="@(e=> e==null?null : $"{e.Name}")">
            <ItemTemplate Context="itemContext">
                @itemContext.Name
            </ItemTemplate>
        </MudAutocomplete>
    </MudCardContent> 

    <MudItem xs="12" sm="6">
        <InputReel Label=@Localizer["Reel"] ReelSelected="ReelSelected" ReelURL="@reelUrl" ReelBase64="@reelBase64"/>
    </MudItem>

    <MudButton Variant="Variant.Outlined"
               StartIcon="@Icons.Material.Filled.ArrowBack"
               Color="Color.Info"
               OnClick="ReturnAction">
        @Localizer["Return"]
    </MudButton>

    <MudButton Variant="Variant.Outlined"
               StartIcon="@Icons.Material.Filled.Check"
               Color="Color.Primary"
               ButtonType="ButtonType.Submit">
        @Localizer["SaveChanges"]
    </MudButton>
</EditForm>
